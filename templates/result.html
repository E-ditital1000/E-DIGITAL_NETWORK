{% extends "base.html" %}

{% block title %}Result Page{% endblock %}

{% block content %}
<head>
  <!-- Other meta tags and stylesheets -->

  <!-- DataTables CSS -->
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.25/css/jquery.dataTables.min.css">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.25/css/dataTables.bootstrap5.min.css">

  <!-- Custom CSS -->
  <style>
    @media (max-width: 767px) {
      .table-responsive {
        overflow-x: auto;
      }
    }
  </style>

</head>

<body>
  <div class="table-responsive">
    <table id="candidateTable" class="table table-bordered table-sm text-center">
      <thead>
        <tr>
          <th>Candidate Name</th>
          <th>Candidate Position <button class="sort-button" data-column="1">Sort</button></th>
          <th>Candidate District</th>
          <th>Candidate County</th>
          <th>Total Vote</th>
        </tr>
      </thead>
      <tbody>
        {% for candidate in obj %}
        <tr>
          <td>{{ candidate.name }}</td>
          <td>{{ candidate.position }}</td>
          <td>{{ candidate.district }}</td>
          <td>{{ candidate.county }}</td>
          <td>{{ candidate.total_vote }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <!-- jQuery -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

  <!-- DataTables -->
  <script src="https://cdn.datatables.net/1.10.25/js/jquery.dataTables.min.js"></script>

  <!-- Bootstrap JS -->
  <script src="https://cdn.datatables.net/1.10.25/js/dataTables.bootstrap5.min.js"></script>

  <script>
    $(document).ready(function() {
      $('#candidateTable').DataTable({
        responsive: true,
        order: [[1, 'asc']], // Sort by position in ascending order
      });

      // Handle sorting button click event
      $('.sort-button').click(function() {
        var column = $(this).data('column');
        $('#candidateTable').DataTable().order([column, 'asc']).draw();
      });
    });
  </script>
{% endblock %}
